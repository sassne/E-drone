
<!-- Fond dégradé animé -->
<div class="absolute inset-0 -z-10 bg-gradient-to-tr from-[#FFB200]/30 via-white to-[#C8102E]/20 animate-gradient-x"></div>

<div class="mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
  <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight flex items-center gap-3">
    <svg class="w-8 h-8 text-[#C8102E] animate-bounce" fill="currentColor" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"/></svg>
    Tableau de bord
  </h1>
  <div class="text-sm text-slate-600 bg-white/80 px-4 py-2 rounded-xl shadow flex items-center gap-2">
    <span class="font-semibold text-[#C8102E]">Aujourd'hui :</span>
    <%= Time.zone.now.strftime('%A %d %B %Y') %>
  </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
  <% cards = [
    { label: 'Heures de vol', value: "#{@total_heures_vol} heures", icon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>' },
    { label: 'Moyenne vols/drone', value: "#{@moyenne_vols_par_drone} vols", icon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v11.25A2.25 2.25 0 006 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0h-1.5m-1.5 0v11.25A2.25 2.25 0 0118 16.5h-2.25m-7.5 0h7.5m-7.5 0l-1 3m8.5-3l1 3m0 0l.5 1.5m-.5-1.5h-9.5m0 0l-.5 1.5M9 11.25v1.5M12 11.25v1.5m3-1.5v1.5"/></svg>' },
    { label: 'Drones actifs', value: "#{@drone_stats.size}", icon: '<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18" stroke-width="1.5" stroke="currentColor" class="w-7 h-7"><path stroke-linecap="round" stroke-linejoin="round" d="M6.143 0H1.857A1.857 1.857 0 0 0 0 1.857v4.286C0 7.169.831 8 1.857 8h4.286A1.857 1.857 0 0 0 8 6.143V1.857A1.857 1.857 0 0 0 6.143 0Zm10 0h-4.286A1.857 1.857 0 0 0 10 1.857v4.286C10 7.169 10.831 8 11.857 8h4.286A1.857 1.857 0 0 0 18 6.143V1.857A1.857 1.857 0 0 0 16.143 0Zm-10 10H1.857A1.857 1.857 0 0 0 0 11.857v4.286C0 17.169.831 18 1.857 18h4.286A1.857 1.857 0 0 0 8 16.143v-4.286A1.857 1.857 0 0 0 6.143 10Zm10 0h-4.286A1.857 1.857 0 0 0 10 11.857v4.286c0 1.026.831 1.857 1.857 1.857h4.286A1.857 1.857 0 0 0 18 16.143v-4.286A1.857 1.857 0 0 0 16.143 10Z"/></svg>' }
  ] %>
  <% cards.each do |card| %>
    <div class="bg-white p-6 rounded-2xl shadow-xl flex items-center group transition transform hover:-translate-y-1 hover:shadow-2xl border border-transparent hover:border-[#FFB200] relative overflow-hidden">
      <div class="h-12 w-12 flex items-center justify-center rounded-full bg-[#FFB200] text-white mr-4 shadow-lg group-hover:scale-110 transition-transform" >
        <%= raw card[:icon] %>
      </div>
      <div>
        <div class="text-slate-600 text-sm group-hover:text-[#FFB200] transition"> <%= card[:label] %> </div>
        <div class="text-3xl font-extrabold text-[#C8102E] group-hover:text-[#FFB200] transition"> <%= card[:value] %> </div>
      </div>
      <div class="absolute right-4 top-4 opacity-0 group-hover:opacity-100 transition text-xs text-[#FFB200] font-bold">+<%= rand(1..5) %> aujourd'hui</div>
    </div>
  <% end %>
</div>

<div class="bg-white rounded-2xl shadow p-6 mb-8">
  <h2 class="text-lg font-semibold text-slate-700 mb-4 flex items-center gap-2">
    <svg class="w-5 h-5 text-[#C8102E]" fill="currentColor" viewBox="0 0 20 20"><path d="M10 2a8 8 0 100 16 8 8 0 000-16zm1 12H9v-2h2v2zm0-4H9V7h2v3z"/></svg>
    Évolution des vols par mois
  </h2>
  <%= line_chart @voles_per_month, height: '300px', library: {title: {text: ''}} %>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
  <% @drone_stats.each do |stat| %>
    <div class="bg-gradient-to-br from-[#FFB200]/20 to-[#C8102E]/10 rounded-2xl p-6 shadow flex flex-col gap-2 group hover:shadow-2xl transition">
      <div class="flex items-center mb-4">
        <div class="h-12 w-12 flex items-center justify-center rounded-full bg-[#C8102E] text-white group-hover:scale-110 transition-transform">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75l8.954 4.477c.637.319 1.4.319 2.037 0l8.954-4.477M4.5 19.5h15a2.25 2.25 0 002.25-2.25V6.75m-19.5 0v10.5A2.25 2.25 0 004.5 19.5zm0-12.75A2.25 2.25 0 016.75 4.5h10.5A2.25 2.25 0 0120.25 6.75"/>
          </svg>
        </div>
        <h3 class="ml-4 text-lg font-semibold text-slate-700 group-hover:text-[#FFB200] transition"><%= stat[:drone].nom %></h3>
      </div>
      <div class="text-slate-600 mb-2">
        <span class="font-bold text-[#FFB200]"> <%= stat[:total_vols] %> </span> vols réalisés
      </div>
      <div class="text-slate-600">
        <span class="font-bold text-[#C8102E]"> <%= stat[:total_heures].round(2) %> </span> heures de vol
      </div>
    </div>
  <% end %>
</div>

<style>
@keyframes gradient-x {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}
.animate-gradient-x {
  background-size: 200% 200%;
  animation: gradient-x 8s ease-in-out infinite;
}
</style>
